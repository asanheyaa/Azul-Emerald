const burgerMenu = document.querySelector(".burger"), menu = document.querySelector(".header__menu-wrapper"), header = document.querySelector(".header"); function burgerFunction(e) { burgerMenu.classList.toggle("_active"), menu.classList.toggle("_active"), header.classList.toggle("_active"), document.body.classList.toggle("_lock") } function selectMenu() { let e = document.querySelectorAll("[data-select-menu]"); if (e) { function t(e) { let t = e.target.closest("[data-select-menu]"), s = t.querySelector("[data-select-menu-drop-down]"); t.classList.toggle("_active"), i(s, 300) } function s(e) { let t = e.target.closest("[data-select-menu]"), s = t.querySelector("[data-select-menu-value]"), r = t.querySelector("[data-select-menu-drop-down]"), i = this.innerText; s.innerHTML = i, t.classList.remove("_active"), a(r, 300) } document.documentElement.addEventListener("click", function t(s) { let r = s.target.closest("[data-select-menu]"); e.forEach(e => { if (!r || r !== e) { e.classList.remove("_active"); let t = e.querySelector("[data-select-menu-drop-down]"); a(t, 300) } }) }), e.forEach(e => { let a = e.querySelector("[data-select-menu-button]"), r = e.querySelectorAll("[data-select-menu-option]"); a.addEventListener("click", t), r.forEach(e => { e.addEventListener("click", s) }) }); let a = (e, t = 500) => { e.classList.contains("_slide") || (e.classList.add("_slide"), e.style.transitionProperty = "height, margin, padding", e.style.transitionDuration = t + "ms", e.style.height = e.offsetHeight + "px", e.offsetHeight, e.style.overflow = "hidden", e.style.height = 0, e.style.paddingTop = 0, e.style.paddingBottom = 0, e.style.marginTop = 0, e.style.marginBottom = 0, window.setTimeout(() => { e.style.display = "none", e.style.removeProperty("height"), e.style.removeProperty("padding-top"), e.style.removeProperty("padding-bottom"), e.style.removeProperty("margin-top"), e.style.removeProperty("margin-bottom"), e.style.removeProperty("overflow"), e.style.removeProperty("transition-duration"), e.style.removeProperty("transition-property"), e.classList.remove("_slide") }, t)) }, r = (e, t = 500) => { if (!e.classList.contains("_slide")) { e.classList.add("_slide"), e.style.removeProperty("display"); let s = window.getComputedStyle(e).display; "none" === s && (s = "block"), e.style.display = s; let a = e.offsetHeight; e.style.overflow = "hidden", e.style.height = 0, e.style.paddingTop = 0, e.style.paddingBottom = 0, e.style.marginTop = 0, e.style.marginBottom = 0, e.offsetHeight, e.style.transitionProperty = "height, margin, padding", e.style.transitionDuration = t + "ms", e.style.height = a + "px", e.style.removeProperty("padding-top"), e.style.removeProperty("padding-bottom"), e.style.removeProperty("margin-top"), e.style.removeProperty("margin-bottom"), window.setTimeout(() => { e.style.removeProperty("height"), e.style.removeProperty("overflow"), e.style.removeProperty("transition-duration"), e.style.removeProperty("transition-property"), e.classList.remove("_slide") }, t) } }, i = (e, t = 500) => { if ("none" === window.getComputedStyle(e).display) return r(e, t); a(e, t) } } } function dynamicAdaptiv() { new class e { constructor(e) { this.type = e } init() { this.оbjects = [], this.daClassname = "_dynamic_adapt_", this.nodes = [...document.querySelectorAll("[data-da]")], this.nodes.forEach(e => { let t = e.dataset.da.trim(), s = t.split(","), a = {}; a.element = e, a.parent = e.parentNode, a.destination = document.querySelector(`${s[0].trim()}`), a.breakpoint = s[1] ? s[1].trim() : "767", a.place = s[2] ? s[2].trim() : "last", a.index = this.indexInParent(a.parent, a.element), this.оbjects.push(a) }), this.arraySort(this.оbjects), this.mediaQueries = this.оbjects.map(({ breakpoint: e }) => `(${this.type}-width: ${e}px),${e}`).filter((e, t, s) => s.indexOf(e) === t), this.mediaQueries.forEach(e => { let t = e.split(","), s = window.matchMedia(t[0]), a = t[1], r = this.оbjects.filter(({ breakpoint: e }) => e === a); s.addEventListener("change", () => { this.mediaHandler(s, r) }), this.mediaHandler(s, r) }) } mediaHandler(e, t) { e.matches ? t.forEach(e => { this.moveTo(e.place, e.element, e.destination) }) : t.forEach(({ parent: e, element: t, index: s }) => { t.classList.contains(this.daClassname) && this.moveBack(e, t, s) }) } moveTo(e, t, s) { if (t.classList.add(this.daClassname), "last" === e || e >= s.children.length) { s.append(t); return } if ("first" === e) { s.prepend(t); return } s.children[e].before(t) } moveBack(e, t, s) { t.classList.remove(this.daClassname), void 0 !== e.children[s] ? e.children[s].before(t) : e.append(t) } indexInParent(e, t) { return [...e.children].indexOf(t) } arraySort(e) { if ("min" === this.type) e.sort((e, t) => e.breakpoint === t.breakpoint ? e.place === t.place ? 0 : "first" === e.place || "last" === t.place ? -1 : "last" === e.place || "first" === t.place ? 1 : 0 : e.breakpoint - t.breakpoint); else { e.sort((e, t) => e.breakpoint === t.breakpoint ? e.place === t.place ? 0 : "first" === e.place || "last" === t.place ? 1 : "last" === e.place || "first" === t.place ? -1 : 0 : t.breakpoint - e.breakpoint); return } } }("max").init() } function filterFunction() { let e = document.querySelectorAll("[data-filter]"); e && e.forEach(e => { let t = e.querySelectorAll("[data-filter-category]"), s = e.querySelectorAll("[data-filter-content]"); t.forEach(e => { e.addEventListener("click", e => { s.forEach(e => { e.classList.contains("_show") && e.classList.remove("_show"), e.classList.contains("_last-child") && e.classList.remove("_last-child") }), t.forEach(e => { e.classList.contains("_active") && e.classList.remove("_active") }); let a = e.target, r = a.dataset.filterCategory; if ("all" === r) s.forEach((e, t) => { e.classList.add("_show"), t === s.length - 1 && e.classList.add("_last-child") }); else { let i = document.querySelectorAll(`[data-filter-content="${r}"]`); i.forEach((e, t) => { e.classList.add("_show"), t === i.length - 1 && e.classList.add("_last-child") }) } a.classList.add("_active") }) }) }) } function videoPlay() { let e = document.querySelectorAll("[data-js-video-player]"); e && e.forEach(e => { let t = e.querySelector("[data-js-video-player-button]"), s = e.querySelector("[data-js-video-player-video]"), a = e.querySelector("[data-js-video-player-poster]"); t.addEventListener("click", function e(r) { s.play(), s.controls = !0, t.classList.remove("_active"), a.classList.contains("_active") && a.classList.remove("_active") }), s.addEventListener("pause", function e(a) { s.controls = !1, t.classList.add("_active") }) }) } burgerMenu.addEventListener("click", burgerFunction), selectMenu(), dynamicAdaptiv(), filterFunction(), videoPlay();
